"use strict";(globalThis.webpackChunkai_robotics_textbook=globalThis.webpackChunkai_robotics_textbook||[]).push([[186],{4684:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=t(8168),o=(t(6540),t(5680));const r={title:"ROS 2 - The Robotic Nervous System",sidebar_position:3},i="Chapter 3: ROS 2 - The Robotic Nervous System",s={unversionedId:"ros2-the-robotic-nervous-system",id:"ros2-the-robotic-nervous-system",title:"ROS 2 - The Robotic Nervous System",description:"The Foundation of Modern Robotics",source:"@site/docs/03-ros2-the-robotic-nervous-system.md",sourceDirName:".",slug:"/ros2-the-robotic-nervous-system",permalink:"/ros2-the-robotic-nervous-system",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03-ros2-the-robotic-nervous-system.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"ROS 2 - The Robotic Nervous System",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Embodied Intelligence and Humanoids",permalink:"/embodied-intelligence-and-humanoids"},next:{title:"URDF and Robot Description",permalink:"/urdf-and-robot-description"}},l={},c=[{value:"The Foundation of Modern Robotics",id:"the-foundation-of-modern-robotics",level:2},{value:"Why ROS 2 for Physical AI and Humanoids?",id:"why-ros-2-for-physical-ai-and-humanoids",level:3},{value:"Core Concepts of ROS 2",id:"core-concepts-of-ros-2",level:2},{value:"3.1. Nodes",id:"31-nodes",level:3},{value:"3.2. Topics",id:"32-topics",level:3},{value:"3.3. Services",id:"33-services",level:3},{value:"3.4. Actions",id:"34-actions",level:3},{value:"3.5. Parameters",id:"35-parameters",level:3},{value:"3.6. Message Types (Msg/Srv/Action Definitions)",id:"36-message-types-msgsrvaction-definitions",level:3},{value:"Setting Up a ROS 2 Workspace",id:"setting-up-a-ros-2-workspace",level:2},{value:"Launch Files and System Orchestration",id:"launch-files-and-system-orchestration",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Practice Assignment",id:"practice-assignment",level:2}],p={toc:c},m="wrapper";function u({components:e,...n}){return(0,o.yg)(m,(0,a.A)({},p,n,{components:e,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"chapter-3-ros-2---the-robotic-nervous-system"},"Chapter 3: ROS 2 - The Robotic Nervous System"),(0,o.yg)("h2",{id:"the-foundation-of-modern-robotics"},"The Foundation of Modern Robotics"),(0,o.yg)("p",null,"ROS 2 (Robot Operating System 2) is a flexible framework for writing robot software. It's not an operating system in the traditional sense, but rather a collection of tools, libraries, and conventions that aim to simplify the task of creating complex and robust robot applications. ROS 2 enables disparate parts of a robotic system\u2014such as sensors, actuators, navigation algorithms, and AI modules\u2014to communicate and work together seamlessly, forming a cohesive robotic nervous system."),(0,o.yg)("h3",{id:"why-ros-2-for-physical-ai-and-humanoids"},"Why ROS 2 for Physical AI and Humanoids?"),(0,o.yg)("p",null,"The complexity of Physical AI and humanoid robotics demands a modular, distributed, and high-performance software architecture. ROS 2 addresses these needs by providing:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Distributed Communication"),": A robust communication infrastructure (DDS - Data Distribution Service) for real-time data exchange between different robot components."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Modularity"),": Encourages breaking down complex robot behaviors into smaller, manageable nodes that can be developed and tested independently."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Language Agnostic"),": Supports multiple programming languages (C++, Python, etc.), allowing developers to choose the best tool for each task."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Extensive Tooling"),": A rich ecosystem of tools for visualization, debugging, data logging, and simulation."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Active Community"),": A large and vibrant open-source community contributing new features, drivers, and packages.")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n    A[Robot Component 1] -- Topic/Service --\x3e B[Robot Component 2]\n    A -- Action --\x3e C[Robot Component 3]\n    B -- Parameter --\x3e A\n    C -- Topic --\x3e B\n")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Figure 3.1: ROS 2 communication paradigm.")," (Components can be nodes, hardware, etc.)"),(0,o.yg)("h2",{id:"core-concepts-of-ros-2"},"Core Concepts of ROS 2"),(0,o.yg)("p",null,"Understanding ROS 2 begins with grasping its fundamental concepts:"),(0,o.yg)("h3",{id:"31-nodes"},"3.1. Nodes"),(0,o.yg)("p",null,"A ",(0,o.yg)("strong",{parentName:"p"},"Node")," is an executable process that performs computation. Nodes are typically designed to do one thing well, encapsulating specific functionalities like reading sensor data, controlling a motor, or performing path planning. For instance, a robot might have a node for its camera, another for its lidar, and a third for its motor control."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-python"},"# Minimal ROS 2 Python Node Example\nimport rclpy\nfrom rclpy.node import Node\n\nclass MyPublisher(Node):\n    def __init__(self):\n        super().__init__('my_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello ROS 2: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    my_publisher = MyPublisher()\n    rclpy.spin(my_publisher)\n    my_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Code 3.1: A simple ROS 2 Python publisher node.")),(0,o.yg)("h3",{id:"32-topics"},"3.2. Topics"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Topics")," are the primary means of asynchronous, many-to-many communication in ROS 2. Nodes publish messages to topics, and other nodes subscribe to those topics to receive the messages. This publish/subscribe model allows for loose coupling between components. For example, a camera node might publish images to an ",(0,o.yg)("inlineCode",{parentName:"p"},"/image_raw")," topic, and a vision processing node might subscribe to it."),(0,o.yg)("h3",{id:"33-services"},"3.3. Services"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Services")," provide a synchronous request/reply communication pattern. A client node sends a request to a service server, which performs a computation and sends back a response. Services are suitable for tasks that require an immediate answer, like querying the robot's current state or triggering a specific action that returns a result."),(0,o.yg)("h3",{id:"34-actions"},"3.4. Actions"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Actions"),' are designed for long-running tasks with regular feedback. They extend services by providing pre-emption capabilities and continuous feedback during execution. An action client sends a goal to an action server, which then provides continuous feedback on progress and, eventually, a result. This is ideal for navigation goals (e.g., "go to kitchen") or complex manipulation tasks.'),(0,o.yg)("h3",{id:"35-parameters"},"3.5. Parameters"),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Parameters")," allow nodes to expose configurable values at runtime. They can be dynamically adjusted without recompiling or restarting the node, offering flexibility for tuning robot behavior (e.g., PID gains, sensor thresholds)."),(0,o.yg)("h3",{id:"36-message-types-msgsrvaction-definitions"},"3.6. Message Types (Msg/Srv/Action Definitions)"),(0,o.yg)("p",null,"ROS 2 uses strongly typed messages. ",(0,o.yg)("strong",{parentName:"p"},"Message definitions")," (",(0,o.yg)("inlineCode",{parentName:"p"},".msg")," files) define the data structures for topics. ",(0,o.yg)("strong",{parentName:"p"},"Service definitions")," (",(0,o.yg)("inlineCode",{parentName:"p"},".srv")," files) define the request and response structure for services. ",(0,o.yg)("strong",{parentName:"p"},"Action definitions")," (",(0,o.yg)("inlineCode",{parentName:"p"},".action")," files) combine goal, result, and feedback structures for actions. These ensure data consistency across the robotic system."),(0,o.yg)("h2",{id:"setting-up-a-ros-2-workspace"},"Setting Up a ROS 2 Workspace"),(0,o.yg)("p",null,"To develop with ROS 2, you'll typically set up a workspace, which is a collection of packages. Here's a basic workflow:"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Create a Workspace"),": Create a directory for your ROS 2 workspace.",(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"mkdir -p ~/ros2_ws/src\ncd ~/ros2_ws/src\n"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Create a Package"),": Use ",(0,o.yg)("inlineCode",{parentName:"li"},"ros2 pkg create")," to create a new package.",(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"ros2 pkg create --build-type ament_python my_robot_controller\n")),"Or for C++:",(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"ros2 pkg create --build-type ament_cmake my_robot_cpp_utils\n"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Build the Workspace"),": Compile your packages.",(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"cd ~/ros2_ws\ncolcon build\n"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Source the Setup File"),": Make your packages visible to ROS 2.",(0,o.yg)("pre",{parentName:"li"},(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"source install/setup.bash\n")))),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n    A[Root Directory] --\x3e B[ros2_ws]\n    B --\x3e C[src]\n    C --\x3e D[my_robot_controller (Python Package)]\n    C --\x3e E[my_robot_cpp_utils (C++ Package)]\n    B --\x3e F[build]\n    B --\x3e G[install]\n    B --\x3e H[log]\n    G --\x3e I[setup.bash (Source this!)]\n")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Figure 3.2: Typical ROS 2 workspace structure.")),(0,o.yg)("h2",{id:"launch-files-and-system-orchestration"},"Launch Files and System Orchestration"),(0,o.yg)("p",null,"For complex robotic systems with many nodes, manually starting each one is impractical. ",(0,o.yg)("strong",{parentName:"p"},"Launch files")," (written in Python or XML) allow you to define and orchestrate the startup of multiple nodes, set parameters, and remap topics. They are crucial for deploying a complete robotic application."),(0,o.yg)("p",null,"Here's a simple Python launch file example:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-python"},"# my_robot_launch.py\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_robot_controller',\n            executable='my_publisher',\n            name='robot_talker',\n            output='screen',\n            parameters=[\n                {'publish_rate': 1.0}\n            ]\n        ),\n        Node(\n            package='my_robot_controller',\n            executable='my_subscriber',\n            name='robot_listener',\n            output='screen'\n        )\n    ])\n")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Code 3.2: A ROS 2 Python launch file.")),(0,o.yg)("p",null,"To run this launch file:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},"ros2 launch my_robot_controller my_robot_launch.py\n")),(0,o.yg)("h2",{id:"conclusion"},"Conclusion"),(0,o.yg)("p",null,"ROS 2 provides the essential framework for developing advanced Physical AI and humanoid robotics applications. Its modular architecture, robust communication mechanisms, and extensive toolset empower developers to manage the inherent complexity of integrating diverse hardware and software components. Mastering ROS 2 is a fundamental step towards building intelligent robots that can effectively perceive, plan, and act in the physical world."),(0,o.yg)("hr",null),(0,o.yg)("h2",{id:"key-takeaways"},"Key Takeaways"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"ROS 2 is a modular framework for robot software development, enabling distributed communication and integration of various components."),(0,o.yg)("li",{parentName:"ul"},"Core concepts include Nodes (computational units), Topics (asynchronous data streams), Services (synchronous request/reply), Actions (long-running tasks with feedback), and Parameters (runtime configuration)."),(0,o.yg)("li",{parentName:"ul"},"Message, service, and action definitions (",(0,o.yg)("inlineCode",{parentName:"li"},".msg"),", ",(0,o.yg)("inlineCode",{parentName:"li"},".srv"),", ",(0,o.yg)("inlineCode",{parentName:"li"},".action")," files) define data structures for communication."),(0,o.yg)("li",{parentName:"ul"},"A ROS 2 workspace is used to organize and build robot packages."),(0,o.yg)("li",{parentName:"ul"},"Launch files orchestrate the startup of multiple nodes and set their configurations.")),(0,o.yg)("h2",{id:"practice-assignment"},"Practice Assignment"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},"Create a new ROS 2 workspace and a Python package named ",(0,o.yg)("inlineCode",{parentName:"li"},"humanoid_comm"),"."),(0,o.yg)("li",{parentName:"ol"},"Within ",(0,o.yg)("inlineCode",{parentName:"li"},"humanoid_comm"),", create two Python nodes: a ",(0,o.yg)("inlineCode",{parentName:"li"},"sensor_publisher")," that publishes a simple integer message to a topic ",(0,o.yg)("inlineCode",{parentName:"li"},"/humanoid_sensor_data")," every second, and a ",(0,o.yg)("inlineCode",{parentName:"li"},"data_logger")," that subscribes to this topic and prints the received data."),(0,o.yg)("li",{parentName:"ol"},"Define a custom message type (",(0,o.yg)("inlineCode",{parentName:"li"},"HumanoidData.msg"),") for the ",(0,o.yg)("inlineCode",{parentName:"li"},"/humanoid_sensor_data")," topic that includes an integer ",(0,o.yg)("inlineCode",{parentName:"li"},"id")," and a string ",(0,o.yg)("inlineCode",{parentName:"li"},"timestamp"),"."),(0,o.yg)("li",{parentName:"ol"},"Create a Python launch file to start both ",(0,o.yg)("inlineCode",{parentName:"li"},"sensor_publisher")," and ",(0,o.yg)("inlineCode",{parentName:"li"},"data_logger")," nodes. Run the launch file and verify communication using ",(0,o.yg)("inlineCode",{parentName:"li"},"ros2 topic echo /humanoid_sensor_data"),".")))}u.isMDXComponent=!0},5680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>d});var a=t(6540);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach(function(n){o(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function s(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=a.createContext({}),c=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(l.Provider,{value:n},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef(function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(t),g=o,d=m["".concat(l,".").concat(g)]||m[g]||u[g]||r;return t?a.createElement(d,i(i({ref:n},p),{},{components:t})):a.createElement(d,i({ref:n},p))});function d(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=g;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[m]="string"==typeof e?e:o,i[1]=s;for(var c=2;c<r;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"}}]);